<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Visual Scripting - Portfolio</title><meta name="description" content="This is my visual scripting page Implementing a modular gameplay system is&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://broremilolofsson.github.io/visual-scripting.html"><link rel="alternate" type="application/atom+xml" href="https://broremilolofsson.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://broremilolofsson.github.io/feed.json"><meta property="og:title" content="Visual Scripting"><meta property="og:image" content="https://broremilolofsson.github.io/media/posts/4/Skaermbild-2023-09-15-102233.png"><meta property="og:image:width" content="716"><meta property="og:image:height" content="295"><meta property="og:site_name" content="Portfolio"><meta property="og:description" content="This is my visual scripting page Implementing a modular gameplay system is&hellip;"><meta property="og:url" content="https://broremilolofsson.github.io/visual-scripting.html"><meta property="og:type" content="article"><link rel="preload" href="https://broremilolofsson.github.io/assets/dynamic/fonts/publicsans/publicsans.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://broremilolofsson.github.io/assets/css/style.css?v=3bde625adf100598a26c3dc67cfe1125"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://broremilolofsson.github.io/visual-scripting.html"},"headline":"Visual Scripting","datePublished":"2024-02-21T12:17","dateModified":"2024-03-28T14:37","image":{"@type":"ImageObject","url":"https://broremilolofsson.github.io/media/posts/4/Skaermbild-2023-09-15-102233.png","height":295,"width":716},"description":"This is my visual scripting page Implementing a modular gameplay system is&hellip;","author":{"@type":"Person","name":"Emil Olofsson","url":"https://broremilolofsson.github.io/authors/me/"},"publisher":{"@type":"Organization","name":"Emil Olofsson","logo":{"@type":"ImageObject","url":"https://broremilolofsson.github.io/media/website/ActionSystem.png","height":494,"width":535}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body><div class="content"><div class="left-bar"><div class="left-bar__inner"><header class="header"><a class="logo" href="https://broremilolofsson.github.io/"><img src="https://broremilolofsson.github.io/media/website/ActionSystem.png" alt="Portfolio" width="535" height="494"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle__box"><span class="navbar__toggle__inner">Menu</span></span></button><ul class="navbar__menu"><li class="active"><a href="https://broremilolofsson.github.io/visual-scripting.html" target="_self" aria-label="Visual Scripting"><span>Visual Scripting</span></a></li><li><a href="https://broremilolofsson.github.io/the-negotiators.html" target="_self" aria-label="The Negotiators"><span>The Negotiators</span></a></li><li><a href="https://broremilolofsson.github.io/spite-new-sun.html" target="_self" aria-label="Spite: New Sun"><span>Spite: New Sun</span></a></li><li><a href="https://broremilolofsson.github.io/projects.html" target="_self" aria-label="Stella&#x27;s Quest"><span>Stella&#x27;s Quest</span></a></li></ul></nav><a class="logo logo--atbottom" href="./"><img src="https://broremilolofsson.github.io/media/website/ActionSystem.png" alt="Portfolio" width="535" height="494"></a></header></div></div><main class="main"><article class="post"><figure class="post__featured-image post__featured-image--attop"><img src="https://broremilolofsson.github.io/media/posts/4/Skaermbild-2023-09-15-102233.png" srcset="https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2023-09-15-102233-xs.png 320w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2023-09-15-102233-sm.png 480w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2023-09-15-102233-md.png 768w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2023-09-15-102233-xl.png 1024w" sizes="(min-width: 1460px) 938px, (min-width: 1200px) calc(75.83vw - 154px), (min-width: 1120px) 938px, (min-width: 900px) calc(55vw + 333px), 100vw" loading="eager" height="295" width="716" alt="" aria-describedby="image-caption"></figure><div class="main__inner"><header class="post__header"><h1 class="post__title">Visual Scripting</h1></header><div class="post__entry"><p>This is my visual scripting page</p><h3 id="background">Background</h3><p>Implementing a modular gameplay system is something that has intrigued me since the start of the <a href="https://broremilolofsson.github.io/projects.html" target="_blank">Stella's Quest</a> project. Since all of my previous systems have been inheritance based, I wanted to try to create something that didn't use classes and virtual functions to enable different behaviors.</p><h3 id="programming-interface">Programming Interface</h3><p>The most important part of creating systems and APIs in my experience is the interface to the user. The interface should be simple and effective, both for programmers, when implementing new nodes, and for level designers, when creating the actual game logic visually.</p><p>An intuitive approach to creating nodes involves defining node types through functions. This method allows programmers to easily define functions that perform specific actions and then register them to a manager responsible for converting these functions into node types. In this model, the parameters of a function serve as the node's input, while its return values serve as the node's output.</p><figure class="post__image post__image--center"><img loading="lazy" src="https://broremilolofsson.github.io/media/posts/4/Skaermbild-2024-03-28-122602.png" height="187" width="542" alt="" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-122602-xs.png 320w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-122602-sm.png 480w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-122602-md.png 768w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-122602-xl.png 1024w"><figcaption>Registering a node to the system</figcaption></figure><figure class="post__image post__image--center"><img loading="lazy" src="https://broremilolofsson.github.io/media/posts/4/Skaermbild-2024-03-28-122930.png" height="262" width="372" alt="" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-122930-xs.png 320w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-122930-sm.png 480w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-122930-md.png 768w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-122930-xl.png 1024w"><figcaption>The generated visual representation of the node</figcaption></figure><p>Since a function in most languages, C++ included, only allows one function return value, std::tuple was utilised enable functions to return multiple values in a single data structure.</p><h3 id="type-erasure">Type Erasure</h3><p>To be able to handle different data types, including custom data types that the user wishes, I used a technique called "type erasure". Type erasure is a way to make the caller indifferent of the actual implementation.&nbsp;</p><h3 id="memory">Memory</h3><p>As we need to be able to allocate essentially any data type in our system, we need to use a data structure that supports this flexibility. The <strong>Memory Pool</strong> enables us to store various data types in contiguous memory. It's essentially implemented as a vector but without the type safety.</p><figure class="post__image post__image--center"><img loading="lazy" src="https://broremilolofsson.github.io/media/posts/4/Skaermbild-2024-03-28-143525.png" height="204" width="525" alt="" sizes="(min-width: 760px) 660px, calc(93.18vw - 30px)" srcset="https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-143525-xs.png 320w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-143525-sm.png 480w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-143525-md.png 768w, https://broremilolofsson.github.io/media/posts/4/responsive/Skaermbild-2024-03-28-143525-xl.png 1024w"><figcaption>Example usage of a memory pool</figcaption></figure><p>In the above image, the int allocated first as the size of an int is 4,&nbsp;</p><p>In the system, only the inputs of a node allocate memory. The outputs of a node are simply ways of communicating between different memory allocations.</p></div><footer class="post__footer"><div class="post__share"></div></footer></div></article></main><div class="right-bar"><div class="right-bar__inner"><div class="sidebar"></div></div></div></div><script defer="defer" src="https://broremilolofsson.github.io/assets/js/scripts.min.js?v=12d8fcd46db8fdc7af6797ec26849875"></script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>